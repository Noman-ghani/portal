<template>
    <overlay :show="showLoader" class="centralized" full-height>
        <template v-if="!showLoader">
            <div class="d-flex">
                <p class="m-0 ml-auto font-size-20">Available SMS Credits - <b>{{$store.getters.user.business.sms_limit}}</b></p>
            </div>
            <b-card-group deck class="mt-4">
                <b-card @click="selectedIndex = idx" v-for="smsPackage, idx in smsPackages" v-bind:key="'item-' + idx" :title="smsPackage.title" :class="{'pointer': true, 'packages': true, 'active': idx === selectedIndex}">
                    <b-card-text>
                        {{smsPackage.text}}
                    </b-card-text>
                </b-card>
            </b-card-group>
            <div v-if="Object.keys(selectedPackage).length" style="width: 500px; margin: auto;" class="text-center mt-5">
                <div style="width: 230px; height: 215px; position: relative;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" width="500" height="500" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; position: absolute; transform: translate3d(0px, 0px, 0px);"><defs><clipPath id="__lottie_element_2"><rect width="500" height="500" x="0" y="0"></rect></clipPath><clipPath id="__lottie_element_4"><path d="M0,0 L500,0 L500,500 L0,500z"></path></clipPath><clipPath id="__lottie_element_29"><path d="M0,0 L500,0 L500,500 L0,500z"></path></clipPath><clipPath id="__lottie_element_48"><path d="M0,0 L500,0 L500,500 L0,500z"></path></clipPath></defs><g clip-path="url(#__lottie_element_2)"><g clip-path="url(#__lottie_element_48)" style="display: block;" transform="matrix(1,0,0,1,2,8)" opacity="1"><g style="display: block;" transform="matrix(0.1675901710987091,-0.30642130970954895,0.30642130970954895,0.1675901710987091,74.36053466796875,479.75970458984375)" opacity="0.6263916666666788"><g opacity="1" transform="matrix(0.7078222036361694,0.7063906192779541,-0.7063906192779541,0.7078222036361694,137.28199768066406,56.5620002746582)"><path fill="rgb(255,222,120)" fill-opacity="1" d=" M17.481000900268555,-17.481000900268555 C17.481000900268555,-17.481000900268555 17.481000900268555,17.481000900268555 17.481000900268555,17.481000900268555 C17.481000900268555,17.481000900268555 -17.481000900268555,17.481000900268555 -17.481000900268555,17.481000900268555 C-17.481000900268555,17.481000900268555 -17.481000900268555,-17.481000900268555 -17.481000900268555,-17.481000900268555 C-17.481000900268555,-17.481000900268555 17.481000900268555,-17.481000900268555 17.481000900268555,-17.481000900268555z"></path></g></g><g style="display: block;" transform="matrix(-0.39303162693977356,-0.30352479219436646,0.30352479219436646,-0.39303162693977356,144.07412719726562,462.86383056640625)" opacity="0.7516700000000147"><g opacity="1" transform="matrix(0.4901280701160431,0.8716504573822021,-0.8716504573822021,0.4901280701160431,122.26699829101562,36.67100143432617)"><path fill="rgb(16,25,40)" fill-opacity="1" d=" M40.46799850463867,-23.82200050354004 C40.46799850463867,-23.82200050354004 22.61400032043457,10.592000007629395 22.61400032043457,10.592000007629395 C22.61400032043457,10.592000007629395 14.173999786376953,6.0229997634887695 14.173999786376953,6.0229997634887695 C14.173999786376953,6.0229997634887695 31.143999099731445,-28.21500015258789 31.143999099731445,-28.21500015258789 C31.143999099731445,-28.21500015258789 40.46799850463867,-23.82200050354004 40.46799850463867,-23.82200050354004z"></path></g></g><g style="display: block;" transform="matrix(0.49796655774116516,0.12381580471992493,-0.12381580471992493,0.49796655774116516,88.91803741455078,284.9476318359375)" opacity="1"><g opacity="1" transform="matrix(0.8022085428237915,-0.2748607397079468,0.2727052867412567,0.7959176301956177,109.44400024414062,145.7239990234375)"><path fill="rgb(255,222,120)" fill-opacity="1" d=" M1.5993886809501329e-15,-26.1200008392334 C1.5993886809501329e-15,-26.1200008392334 11.31029224395752,-6.53000020980835 11.31029224395752,-6.53000020980835 C11.31029224395752,-6.53000020980835 22.62058448791504,13.0600004196167 22.62058448791504,13.0600004196167 C22.62058448791504,13.0600004196167 3.699596815150922e-15,13.0600004196167 3.699596815150922e-15,13.0600004196167 C3.699596815150922e-15,13.0600004196167 -22.62058448791504,13.0600004196167 -22.62058448791504,13.0600004196167 C-22.62058448791504,13.0600004196167 -11.31029224395752,-6.53000020980835 -11.31029224395752,-6.53000020980835 C-11.31029224395752,-6.53000020980835 1.5993886809501329e-15,-26.1200008392334 1.5993886809501329e-15,-26.1200008392334z"></path></g></g><g style="display: block;" transform="matrix(0.554855227470398,0,0,0.554855227470398,35.482933044433594,260.0917053222656)" opacity="0.9395875000000183"><g opacity="1" transform="matrix(1,0,0,1,159.572998046875,107.15399932861328)"><path fill="rgb(16,25,40)" fill-opacity="1" d=" M0,-8.274999618530273 C4.566972255706787,-8.274999618530273 8.274999618530273,-4.566972255706787 8.274999618530273,0 C8.274999618530273,4.566972255706787 4.566972255706787,8.274999618530273 0,8.274999618530273 C-4.566972255706787,8.274999618530273 -8.274999618530273,4.566972255706787 -8.274999618530273,0 C-8.274999618530273,-4.566972255706787 -4.566972255706787,-8.274999618530273 0,-8.274999618530273z"></path></g></g><g style="display: block;" transform="matrix(0.48793575167655945,0,0,0.48793575167655945,-5.619110107421875,358.3037109375)" opacity="0.9395875000000183"><g opacity="1" transform="matrix(1,0,0,1,166.4029998779297,108.01699829101562)"><path fill="rgb(171,223,245)" fill-opacity="1" d=" M0,-8.274999618530273 C4.566972255706787,-8.274999618530273 8.274999618530273,-4.566972255706787 8.274999618530273,0 C8.274999618530273,4.566972255706787 4.566972255706787,8.274999618530273 0,8.274999618530273 C-4.566972255706787,8.274999618530273 -8.274999618530273,4.566972255706787 -8.274999618530273,0 C-8.274999618530273,-4.566972255706787 -4.566972255706787,-8.274999618530273 0,-8.274999618530273z"></path></g></g></g><g clip-path="url(#__lottie_element_29)" style="display: block;" transform="matrix(1,0,0,1,0,0)" opacity="1"><g style="display: block;" transform="matrix(0.3182002902030945,-0.6298507452011108,0.6298507452011108,0.3182002902030945,288.314453125,385.150634765625)" opacity="1"><g opacity="1" transform="matrix(0.7078222036361694,0.7063906192779541,-0.7063906192779541,0.7078222036361694,137.28199768066406,56.5620002746582)"><path fill="rgb(171,223,245)" fill-opacity="1" d=" M17.481000900268555,-17.481000900268555 C17.481000900268555,-17.481000900268555 17.481000900268555,17.481000900268555 17.481000900268555,17.481000900268555 C17.481000900268555,17.481000900268555 -17.481000900268555,17.481000900268555 -17.481000900268555,17.481000900268555 C-17.481000900268555,17.481000900268555 -17.481000900268555,-17.481000900268555 -17.481000900268555,-17.481000900268555 C-17.481000900268555,-17.481000900268555 17.481000900268555,-17.481000900268555 17.481000900268555,-17.481000900268555z"></path></g></g><g style="display: block;" transform="matrix(0.437488317489624,-0.1227337196469307,0.1227337196469307,0.437488317489624,303.4290771484375,457.3509521484375)" opacity="1"><g opacity="1" transform="matrix(0.4901280701160431,0.8716504573822021,-0.8716504573822021,0.4901280701160431,122.26699829101562,36.67100143432617)"><path fill="rgb(255,222,120)" fill-opacity="1" d=" M40.46799850463867,-23.82200050354004 C40.46799850463867,-23.82200050354004 22.61400032043457,10.592000007629395 22.61400032043457,10.592000007629395 C22.61400032043457,10.592000007629395 14.173999786376953,6.0229997634887695 14.173999786376953,6.0229997634887695 C14.173999786376953,6.0229997634887695 31.143999099731445,-28.21500015258789 31.143999099731445,-28.21500015258789 C31.143999099731445,-28.21500015258789 40.46799850463867,-23.82200050354004 40.46799850463867,-23.82200050354004z"></path></g></g><g style="display: block;" transform="matrix(0.4663216471672058,-0.22500300407409668,0.22500300407409668,0.4663216471672058,327.050048828125,402.8758850097656)" opacity="0.9395875000000183"><g opacity="1" transform="matrix(0.4901280701160431,0.8716504573822021,-0.8716504573822021,0.4901280701160431,122.26699829101562,36.67100143432617)"><path fill="rgb(171,223,245)" fill-opacity="1" d=" M40.46799850463867,-23.82200050354004 C40.46799850463867,-23.82200050354004 22.61400032043457,10.592000007629395 22.61400032043457,10.592000007629395 C22.61400032043457,10.592000007629395 14.173999786376953,6.0229997634887695 14.173999786376953,6.0229997634887695 C14.173999786376953,6.0229997634887695 31.143999099731445,-28.21500015258789 31.143999099731445,-28.21500015258789 C31.143999099731445,-28.21500015258789 40.46799850463867,-23.82200050354004 40.46799850463867,-23.82200050354004z"></path></g></g><g style="display: block;" transform="matrix(0.4357423782348633,0.0439550019800663,-0.0439550019800663,0.4357423782348633,322.9178466796875,351.85797119140625)" opacity="1"><g opacity="1" transform="matrix(0.8022085428237915,-0.2748607397079468,0.2727052867412567,0.7959176301956177,109.44400024414062,145.7239990234375)"><path fill="rgb(16,25,40)" fill-opacity="1" d=" M1.5993886809501329e-15,-26.1200008392334 C1.5993886809501329e-15,-26.1200008392334 11.31029224395752,-6.53000020980835 11.31029224395752,-6.53000020980835 C11.31029224395752,-6.53000020980835 22.62058448791504,13.0600004196167 22.62058448791504,13.0600004196167 C22.62058448791504,13.0600004196167 3.699596815150922e-15,13.0600004196167 3.699596815150922e-15,13.0600004196167 C3.699596815150922e-15,13.0600004196167 -22.62058448791504,13.0600004196167 -22.62058448791504,13.0600004196167 C-22.62058448791504,13.0600004196167 -11.31029224395752,-6.53000020980835 -11.31029224395752,-6.53000020980835 C-11.31029224395752,-6.53000020980835 1.5993886809501329e-15,-26.1200008392334 1.5993886809501329e-15,-26.1200008392334z"></path></g></g><g style="display: block;" transform="matrix(0.4847082495689392,0,0,0.4847082495689392,272.80706787109375,310.6959228515625)" opacity="0.7516700000000147"><g opacity="1" transform="matrix(1,0,0,1,159.572998046875,107.15399932861328)"><path fill="rgb(255,222,120)" fill-opacity="1" d=" M0,-8.274999618530273 C4.566972255706787,-8.274999618530273 8.274999618530273,-4.566972255706787 8.274999618530273,0 C8.274999618530273,4.566972255706787 4.566972255706787,8.274999618530273 0,8.274999618530273 C-4.566972255706787,8.274999618530273 -8.274999618530273,4.566972255706787 -8.274999618530273,0 C-8.274999618530273,-4.566972255706787 -4.566972255706787,-8.274999618530273 0,-8.274999618530273z"></path></g></g></g><g clip-path="url(#__lottie_element_4)" style="display: block;" transform="matrix(1,0,0,1,16,0)" opacity="1"><g style="display: block;" transform="matrix(1,0,0,1,250.25,249.99998474121094)" opacity="1"><g opacity="1" transform="matrix(0.9901700019836426,0,0,1,-13.069999694824219,188.4250030517578)"><path fill="rgb(216,216,216)" fill-opacity="1" d=" M84.93000030517578,-15.758000373840332 C84.93000030517578,-15.758000373840332 88.97000122070312,0.5580000281333923 88.97000122070312,0.5580000281333923 C88.97000122070312,0.5580000281333923 83.81099700927734,20.909000396728516 -0.20100000500679016,21.892000198364258 C-81.22799682617188,22.409000396728516 -89.74099731445312,-0.44200000166893005 -89.74099731445312,-0.44200000166893005 C-89.74099731445312,-0.44200000166893005 -84.93000030517578,-15.758000373840332 -84.93000030517578,-15.758000373840332 C-84.93000030517578,-15.758000373840332 84.93000030517578,-15.758000373840332 84.93000030517578,-15.758000373840332z"></path></g></g><g style="display: block;" transform="matrix(1.003309965133667,0,0,1.1171900033950806,249.71160888671875,229.48190307617188)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,-12.871000289916992,173.8040008544922)"><path fill="rgb(232,232,232)" fill-opacity="1" d=" M0,-19.765499114990234 C46.326759338378906,-19.765499114990234 83.94049835205078,-10.908578872680664 83.94049835205078,0 C83.94049835205078,10.908578872680664 46.326759338378906,19.765499114990234 0,19.765499114990234 C-46.326759338378906,19.765499114990234 -83.94049835205078,10.908578872680664 -83.94049835205078,0 C-83.94049835205078,-10.908578872680664 -46.326759338378906,-19.765499114990234 0,-19.765499114990234z"></path></g></g><g style="display: block;" transform="matrix(0.9993075728416443,0,0,1.0999493598937988,249.66009521484375,232.4783935546875)" opacity="0.7593945398158909"><g opacity="1" transform="matrix(0.9131399989128113,0,0,0.8641300201416016,-12.871000289916992,172.5540008544922)"><path fill="rgb(194,194,194)" fill-opacity="1" d=" M0,-19.765499114990234 C46.326759338378906,-19.765499114990234 83.94049835205078,-10.908578872680664 83.94049835205078,0 C83.94049835205078,10.908578872680664 46.326759338378906,19.765499114990234 0,19.765499114990234 C-46.326759338378906,19.765499114990234 -83.94049835205078,10.908578872680664 -83.94049835205078,0 C-83.94049835205078,-10.908578872680664 -46.326759338378906,-19.765499114990234 0,-19.765499114990234z"></path></g></g><g style="display: block;" transform="matrix(0.9831600189208984,0,0,0.8313500285148621,249.49354553222656,271.03863525390625)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,-12.913000106811523,152.91400146484375)"><path fill="rgb(168,208,252)" fill-opacity="1" d=" M70.819091796875,-1.5486174821853638 C70.819091796875,-1.5486174821853638 70.83699798583984,28.163999557495117 70.83699798583984,28.163999557495117 C70.83699798583984,28.163999557495117 58.01900100708008,47.51599884033203 1.6770000457763672,46.608001708984375 C-62.92399978637695,46.71500015258789 -70.83699798583984,28.163999557495117 -70.83699798583984,28.163999557495117 C-70.83699798583984,28.163999557495117 -70.85490417480469,-1.5486174821853638 -70.85490417480469,-1.5486174821853638 C-70.85490417480469,-1.5486174821853638 70.819091796875,-1.5486174821853638 70.819091796875,-1.5486174821853638z"></path></g></g><g style="display: block;" transform="matrix(0.9928699731826782,0,0,1,250.3496856689453,271.2657165527344)" opacity="1"><g opacity="1" transform="matrix(1.3006600141525269,0,0,1.5458999872207642,-13.64900016784668,124.95800018310547)"><path fill="rgb(87,166,253)" fill-opacity="1" d=" M0,-11.782999992370605 C-29.79199981689453,-11.782999992370605 -53.944000244140625,-6.507999897003174 -53.944000244140625,0 C-53.944000244140625,6.507999897003174 -29.79199981689453,11.782999992370605 0,11.782999992370605 C29.79199981689453,11.782999992370605 53.944000244140625,6.507999897003174 53.944000244140625,0 C53.944000244140625,-6.507999897003174 29.79199981689453,-11.782999992370605 0,-11.782999992370605z"></path></g></g><g style="display: block;" transform="matrix(0.22618809342384338,0,0,0.18563057482242584,258.51025390625,370.3888854980469)" opacity="0.32824303781700936"><g opacity="1" transform="matrix(1.3006600141525269,0,0,1.5458999872207642,-13.64900016784668,124.95800018310547)"><path fill="rgb(43,122,209)" fill-opacity="1" d=" M0,-11.782999992370605 C-29.79199981689453,-11.782999992370605 -53.944000244140625,-6.507999897003174 -53.944000244140625,0 C-53.944000244140625,6.507999897003174 -29.79199981689453,11.782999992370605 0,11.782999992370605 C29.79199981689453,11.782999992370605 53.944000244140625,6.507999897003174 53.944000244140625,0 C53.944000244140625,-6.507999897003174 29.79199981689453,-11.782999992370605 0,-11.782999992370605z"></path></g></g><g style="display: block;" transform="matrix(2,0,0,2,176.5,68.56421661376953)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"></g><g opacity="1" transform="matrix(1,0,0,1,26.493000030517578,35.858001708984375)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M0,-35.604000091552734 C0,-35.604000091552734 0,-35.604000091552734 0,-35.604000091552734 C-8.336000442504883,-35.604000091552734 -15.093000411987305,-27.893999099731445 -15.093000411987305,-18.384000778198242 C-15.093000411987305,-18.384000778198242 -15.093000411987305,35.604000091552734 -15.093000411987305,35.604000091552734 C-15.093000411987305,35.604000091552734 15.093000411987305,35.604000091552734 15.093000411987305,35.604000091552734 C15.093000411987305,35.604000091552734 15.093000411987305,-18.384000778198242 15.093000411987305,-18.384000778198242 C15.093000411987305,-27.893999099731445 8.336000442504883,-35.604000091552734 0,-35.604000091552734z"></path></g><g opacity="1" transform="matrix(1,0,0,1,23.39699935913086,62.948001861572266)"><path fill="rgb(193,193,193)" fill-opacity="1" d=" M11.996999740600586,-0.5389999747276306 C11.996999740600586,-0.5389999747276306 3.2339999675750732,-15.90999984741211 -11.996999740600586,-16.253999710083008 C-11.996999740600586,-16.253999710083008 -11.996999740600586,16.253999710083008 -11.996999740600586,16.253999710083008 C-11.996999740600586,16.253999710083008 10.954000473022461,16.253999710083008 10.954000473022461,16.253999710083008 C10.954000473022461,16.253999710083008 11.996999740600586,-0.5389999747276306 11.996999740600586,-0.5389999747276306z"></path></g><g opacity="1" transform="matrix(1,0,0,1,26.68600082397461,86.51599884033203)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M26.121999740600586,0.0010000000474974513 C26.121999740600586,14.428000450134277 14.428000450134277,26.121999740600586 0.0010000000474974513,26.121999740600586 C-14.425999641418457,26.121999740600586 -26.121999740600586,14.428000450134277 -26.121999740600586,0.0010000000474974513 C-26.121999740600586,-14.425999641418457 -14.425999641418457,-26.121999740600586 0.0010000000474974513,-26.121999740600586 C14.428000450134277,-26.121999740600586 26.121999740600586,-14.425999641418457 26.121999740600586,0.0010000000474974513z"></path></g><g opacity="1" transform="matrix(1,0,0,1,36.323001861572266,120.48795318603516)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M6.288570880889893,26.935041427612305 C6.287905216217041,26.935121536254883 6.2592926025390625,26.935482025146484 6.2592926025390625,26.935482025146484 C-0.6978928446769714,26.935972213745117 -6.268042087554932,21.341949462890625 -6.269129276275635,14.43627643585205 C-6.27021598815918,14.408560752868652 -6.269000053405762,-26.934999465942383 -6.269000053405762,-26.934999465942383 C-6.269000053405762,-26.934999465942383 6.245421409606934,-26.948110580444336 6.269000053405762,-26.934999465942383 C6.278428554534912,-26.92975616455078 6.276506423950195,-14.53618335723877 6.270514965057373,-14.475168228149414 C6.263708114624023,-14.330475807189941 6.248172283172607,26.894744873046875 6.288570880889893,26.935041427612305z"></path></g><g opacity="1" transform="matrix(1,0,0,1,24.94499969482422,111.94300079345703)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M-0.0010000000474974513,7.429999828338623 C-0.0010000000474974513,7.429999828338623 -0.0010000000474974513,7.429999828338623 -0.0010000000474974513,7.429999828338623 C-2.822000026702881,7.429999828338623 -5.109000205993652,5.142000198364258 -5.109000205993652,2.322000026702881 C-5.109000205993652,2.322000026702881 -5.109000205993652,-2.322999954223633 -5.109000205993652,-2.322999954223633 C-5.109000205993652,-5.144000053405762 -2.822000026702881,-7.431000232696533 -0.0010000000474974513,-7.431000232696533 C2.821000099182129,-7.431000232696533 5.109000205993652,-5.144000053405762 5.109000205993652,-2.322999954223633 C5.109000205993652,-2.322999954223633 5.109000205993652,2.322000026702881 5.109000205993652,2.322000026702881 C5.109000205993652,5.142000198364258 2.821000099182129,7.429999828338623 -0.0010000000474974513,7.429999828338623z"></path></g><g opacity="1" transform="matrix(1,0,0,1,47.70000076293945,99.41200256347656)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M0.14499999582767487,12.468999862670898 C0.14499999582767487,12.468999862670898 -0.14300000667572021,12.468999862670898 -0.14300000667572021,12.468999862670898 C-2.884999990463257,12.468999862670898 -5.109000205993652,10.907999992370605 -5.109000205993652,8.984000205993652 C-5.109000205993652,8.984000205993652 -5.109000205993652,-8.986000061035156 -5.109000205993652,-8.986000061035156 C-5.109000205993652,-10.91100025177002 -2.884999990463257,-12.470000267028809 -0.14300000667572021,-12.470000267028809 C-0.14300000667572021,-12.470000267028809 0.14499999582767487,-12.470000267028809 0.14499999582767487,-12.470000267028809 C2.885999917984009,-12.470000267028809 5.109000205993652,-10.91100025177002 5.109000205993652,-8.986000061035156 C5.109000205993652,-8.986000061035156 5.109000205993652,8.984000205993652 5.109000205993652,8.984000205993652 C5.109000205993652,10.907999992370605 2.885999917984009,12.468999862670898 0.14499999582767487,12.468999862670898z"></path></g><g opacity="1" transform="matrix(1,0,0,1,14.727999687194824,109.38800048828125)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M0,7.429999828338623 C0,7.429999828338623 0,7.429999828338623 0,7.429999828338623 C-2.821000099182129,7.429999828338623 -5.107999801635742,5.14300012588501 -5.107999801635742,2.322000026702881 C-5.107999801635742,2.322000026702881 -5.107999801635742,-2.322000026702881 -5.107999801635742,-2.322000026702881 C-5.107999801635742,-5.14300012588501 -2.821000099182129,-7.429999828338623 0,-7.429999828338623 C2.821000099182129,-7.429999828338623 5.107999801635742,-5.14300012588501 5.107999801635742,-2.322000026702881 C5.107999801635742,-2.322000026702881 5.107999801635742,2.322000026702881 5.107999801635742,2.322000026702881 C5.107999801635742,5.14300012588501 2.821000099182129,7.429999828338623 0,7.429999828338623z"></path></g><g opacity="1" transform="matrix(1,0,0,1,5.671999931335449,95.5719985961914)"><path fill="rgb(214,214,214)" fill-opacity="1" d=" M0,16.3700008392334 C0,16.3700008392334 0,16.3700008392334 0,16.3700008392334 C-2.821000099182129,16.3700008392334 -5.107999801635742,14.083000183105469 -5.107999801635742,11.26200008392334 C-5.107999801635742,11.26200008392334 -5.107999801635742,-11.26200008392334 -5.107999801635742,-11.26200008392334 C-5.107999801635742,-14.083000183105469 -2.821000099182129,-16.3700008392334 0,-16.3700008392334 C2.821000099182129,-16.3700008392334 5.107999801635742,-14.083000183105469 5.107999801635742,-11.26200008392334 C5.107999801635742,-11.26200008392334 5.107999801635742,11.26200008392334 5.107999801635742,11.26200008392334 C5.107999801635742,14.083000183105469 2.821000099182129,16.3700008392334 0,16.3700008392334z"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(193,193,193)" stroke-opacity="1" stroke-width="0.774" d=" M19.836000442504883,108.0719985961914 C19.836000442504883,108.0719985961914 19.836000442504883,97.15899658203125 19.836000442504883,97.15899658203125"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(193,193,193)" stroke-opacity="1" stroke-width="0.774" d=" M9.736000061035156,107.68599700927734 C9.736000061035156,107.68599700927734 9.736000061035156,100.02300262451172 9.736000061035156,100.02300262451172"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(193,193,193)" stroke-opacity="1" stroke-width="0.774" d=" M30.170000076293945,109.62000274658203 C30.170000076293945,109.62000274658203 30.170000076293945,92.20500183105469 30.170000076293945,92.20500183105469"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(193,193,193)" stroke-opacity="1" stroke-width="0.774" d=" M42.70800018310547,106.04299926757812 C42.70800018310547,106.04299926757812 42.70800018310547,98.37999725341797 42.70800018310547,98.37999725341797"></path></g></g></g></g></svg>
                </div>
                <p class="m-0 mt-2 font-size-24 font-weight-700">Your SMS package - {{selectedPackage.title}}</p>
                <p class="m-0 mt-3 font-size-17">Select your payment method and topup your sms credit.</p>
                <payment-methods
                    v-if="Object.keys(selectedPackage).length"
                    :amount="selectedPackage.price"
                    :order-reference="selectedPackage.order_reference"
                    order-type="sms-manager-portal"
                ></payment-methods>
            </div>
        </template>
    </overlay>
</template>
<script>
    import Vue from "vue"
    import * as VeeValidate from "@/plugins/vee-validate"
    import Overlay from "@/components/helpers/overlay.vue"
    import PaymentMethods from "@/components/helpers/payment-methods.vue"

    Vue.use(VeeValidate)

    export default {
        components: {
            Overlay,
            PaymentMethods
        },
        data: function () {
            return {
                showLoader: true,
                selectedIndex: -1,
                smsPackages: []
            }
        },
        created: async function () {
            const smsPackagesPromise = new Promise((resolve) => { this.$http.get("utilities/sms-packages", {params: {country_id: this.$store.getters.user.business.country_id}}).then(response => resolve(response)) })
            const paymentMethodsPromise = new Promise((resolve) => { this.$http.get("utilities/payment-methods/" + this.$store.getters.user.business.country_id).then(response => resolve(response)) })

            let [smsPackagesResponse, paymentMethodsResponse] = await Promise.all([smsPackagesPromise, paymentMethodsPromise])
            
            this.smsPackages = smsPackagesResponse.data
            this.paymentMethods = paymentMethodsResponse.data
            this.showLoader = false

            if ("payment-response[status]" in this.$route.query) {
                this.$helpers.showToast(this.$route.query["payment-response[status]"] === "declined" ? "danger" : "success", this.$route.query["payment-response[message]"])
            }
        },
        computed: {
            selectedPackage: function () {
                return this.smsPackages[this.selectedIndex] ?? {}
            }
        }
    }
</script>
<style scoped lang="scss">
    .packages {
        :hover {
            background: #e5f1ff;
        }
        &.active {
            background: #e5f1ff;
            &:after {
                content: url('data:image/svg+xml; utf-8, <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" class="bi bi-check" viewBox="0 0 16 16"><path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" /></svg>');
                position: absolute;
                top: -8px;
                right: -8px;
                width: 20px;
                height: 20px;
                background: #0C56C9;
                border-radius: 50%;
            }
        }
    }
</style>